{"version":3,"file":"commonHelpers.js","sources":["../src/js/best-sellers.js","../src/js/books-search.js","../src/js/sidebar.js"],"sourcesContent":["import axios from 'axios';\n\nimport { onclickGalleryItem } from '../js/modal-window';\n\nconst topBooksContainer = document.querySelector('.top-books-container');\n\nconst BASE_URL = 'https://books-backend.p.goit.global/';\nrenderTopCategoryBooks();\naddListenerToCards();\nasync function getTopFiveBooks() {\n  try {\n    const response = await axios.get(BASE_URL + 'books/top-books');\n    return response;\n  } catch (error) {\n    alert('Something went wrong, please try again.');\n    return error;\n  }\n}\n\nexport async function renderTopCategoryBooks() {\n  topBooksContainer.replaceChildren();\n  topBooksContainer.insertAdjacentHTML(\n    'afterbegin',\n    `  <h1 class=\"best-sellers-title\">\n    Best sellers <span class=\"best-sellers-title-accent\">Books</span>\n  </h1>\n  <ul class=\"top-books-list\"></ul>`\n  );\n  const topBookList = document.querySelector('.top-books-list');\n  const topBooks = await getTopFiveBooks();\n  topBooks.data.map(book => {\n    const categoryBox = createCategoryBox(book);\n    topBookList.insertAdjacentHTML('beforeend', categoryBox);\n  });\n  addListenerToCards();\n}\n\nfunction slicePhrase(length, phrase) {\n  if (phrase.length > length) {\n    return phrase.slice(0, length) + '...';\n  } else {\n    return phrase;\n  }\n}\n\nfunction createCategoryBox(category) {\n  const bookList = category.books.map(book => createBookCard(book)).join('');\n  return `\n  <li class=\"top-category\" >\n    <p class=\"top-category-name\">${category.list_name}</p>\n    <ul class=\"top-category-list\">${bookList}</ul>\n      <button value=\"${category.list_name}\" class=\"top-books-btn\">See more</button></li>\n        `;\n}\n\nfunction createBookCard({ book_image, _id, title, author }) {\n  return `<li class=\"top-book-list\" >\n      <img src=\"${book_image}\" \n      alt=\"${title}\" class=\"top-book-img\" data-id=\"${_id}\"/>\n      <h2 class=\"top-book-title\">${slicePhrase(16, title)}</h2>\n      <p class=\"top-book-author\">${slicePhrase(16, author)}</p>\n    </li>`;\n}\nfunction addListenerToCards() {\n  const galleryImg = document.querySelectorAll('.top-book-img');\n  galleryImg.forEach(img => {\n    img.addEventListener('click', onclickGalleryItem);\n  });\n}\n","import axios from 'axios';\n\nfunction getBooks() {\n  const outputDiv = document.getElementById('output');\n  outputDiv.innerHTML = '';\n\n  outputDiv.innerHTML = '<div class=\"loader\">Loading...</div>';\n\n  axios\n    .get(\n      'https://openlibrary.org/search.json?q=' +\n        document.getElementById('input').value\n    )\n    .then(response => {\n      outputDiv.innerHTML = '';\n      for (let i = 0; i < 10 && i < response.data.docs.length; i++) {\n        if (response.data.docs[i].title) {\n          outputDiv.innerHTML +=\n            '<h2 class=\"book-search-title\">' +\n            response.data.docs[i].title +\n            '</h2>' +\n            (response.data.docs[i].author_name\n              ? response.data.docs[i].author_name[0]\n              : 'Invisible author') +\n            '<br><img class=\"books-search-cover\" src=\"https://covers.openlibrary.org/b/isbn/' +\n            response.data.docs[i].isbn[0] +\n            '-M.jpg\"><br>';\n        } else {\n          console.log('Heading not found for element with index ' + i);\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error occurred while fetching books:', error);\n      outputDiv.innerHTML = '';\n    });\n}\n\nfunction handleButtonClick() {\n  getBooks();\n}\n\ndocument\n  .getElementById('buttonId')\n  .addEventListener('click', handleButtonClick);\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const outputDiv = document.getElementById('output');\n  outputDiv.innerHTML = '';\n});\n","import { onclickGalleryItem } from '../js/modal-window';\nimport { renderTopCategoryBooks } from './best-sellers';\n\nconst bestSellersContainer = document.querySelector('.top-books-container');\n\nasync function getBooks(category) {\n  if (category.length !== 0) {\n    try {\n      let url = `https://books-backend.p.goit.global/books/category?category=${category}`;\n\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error('Failed to fetch books');\n      }\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      console.error(error);\n      return [];\n    }\n  } else {\n    console.log('Hello sir ');\n  }\n}\n\nasync function displayBooks(category) {\n  const booksList = document.querySelector('.books-list');\n  if (booksList) {\n    booksList.innerHTML = ''; // Очистимо список книг перед відображенням нових\n    const books = await getBooks(category);\n    books.forEach(book => {\n      const bookInfoHTML = `\n                        <div class=\"book\">\n                            <img class=\"image_book\" src=\"${book.book_image}\"  data-id=\"${book._id}\"alt=\"Book Image\">\n                            <h2 class=\"title_book\"> ${book.title}</h2>\n                            <p class=\"test_book\"> ${book.contributor}</p>\n                        </div>\n                    `;\n      booksList.innerHTML += bookInfoHTML;\n    });\n    document.getElementById('selectedCategory').textContent = category;\n  } else {\n    console.error('Element with class \"books-list\" not found');\n  }\n}\ndocument.addEventListener('DOMContentLoaded', () => {\n  const categoryList = document.getElementById('categoryList');\n  if (categoryList) {\n    categoryList.addEventListener('click', event => {\n      bestSellersContainer.replaceChildren();\n      bestSellersContainer.insertAdjacentHTML(\n        'afterbegin',\n        `  <div class=\"box-in-box\">\n    <h1 class=\"title-category-page\">\n      <span class=\"titlecategory\" id=\"selectedCategory\"></span>\n    </h1>\n    <ul class=\"books-list\"></ul>\n  </div>`\n      );\n\n      const bookList = document.querySelector('.books-list');\n      bookList.addEventListener('click', onclickGalleryItem);\n\n      if (event.target && event.target.matches('li.category-item')) {\n        let category = event.target.textContent;\n\n        if (category == 'All categories') {\n          renderTopCategoryBooks();\n          return;\n        }\n        const categoryItems = categoryList.querySelectorAll('.category-item');\n        categoryItems.forEach(item => {\n          item.classList.remove('active');\n        });\n        event.target.classList.add('active');\n        displayBooks(category);\n      }\n    });\n  } else {\n    console.error('Element with id \"categoryList\" not found');\n  }\n});\n\nfetch('https://books-backend.p.goit.global/books/category-list')\n  .then(response => response.json())\n  .then(data => {\n    data.sort((a, b) => a.list_name.localeCompare(b.list_name));\n\n    const categoryList = document.getElementById('categoryList');\n\n    data.forEach(item => {\n      const category = item.list_name;\n      const listItem = document.createElement('li');\n      listItem.textContent = category;\n      listItem.classList.add('category-item');\n      categoryList.appendChild(listItem);\n    });\n  })\n  .catch(error => console.error('Error fetching data:', error));\n"],"names":["topBooksContainer","BASE_URL","renderTopCategoryBooks","addListenerToCards","getTopFiveBooks","axios","error","topBookList","book","categoryBox","createCategoryBox","slicePhrase","length","phrase","category","bookList","createBookCard","book_image","_id","title","author","img","onclickGalleryItem","getBooks","outputDiv","response","i","handleButtonClick","bestSellersContainer","url","displayBooks","booksList","bookInfoHTML","categoryList","event","item","data","a","b","listItem"],"mappings":"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"}