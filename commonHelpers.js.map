{"version":3,"file":"commonHelpers.js","sources":["../src/js/modal-open-buttom.js","../src/js/login-modal.js","../src/js/modal-window.js","../src/js/best-sellers.js","../src/js/dark-theme.js","../src/js/books-search.js","../src/js/sidebar.js"],"sourcesContent":["const mobileMenuBtn = document.querySelector('.js-toggle-mobile-menu');\nconst mobileMenu = document.querySelector('.mobile-menu');\nmobileMenuBtn.addEventListener('click', onMobileMenuBtnClick);\nexport function onMobileMenuBtnClick() {\n  mobileMenu.classList.toggle('visually-hidden');\n}\n","import {\n  navListItems,\n  openModalButton,\n  mobileLogOutButton,\n  mobileSignUp,\n  openLoginModal,\n  modalBackdrop,\n} from './header';\n\nimport { onMobileMenuBtnClick } from './modal-open-buttom';\n\nconst signUpForm = document.querySelector('.sign-up-form');\nconst logOutButton = document.querySelector('.log-out-button');\n\nconst LOGIN_STORAGE_KEY = 'sign-up-form-state';\nlet data = JSON.parse(localStorage.getItem(LOGIN_STORAGE_KEY)) || '';\n\nsignUpForm.addEventListener('submit', event => {\n  localStorage.removeItem(LOGIN_STORAGE_KEY);\n  event.preventDefault();\n  const userName = event.currentTarget.elements.name.value.trim();\n  const userEmail = event.currentTarget.elements.email.value.trim();\n  const userPassword = event.currentTarget.elements.password.value.trim();\n\n  if (\n    userName.length === 0 ||\n    userEmail.length === 0 ||\n    userPassword.length === 0\n  ) {\n    alert('All form fields must be filled in');\n  } else {\n    const userData = {\n      name: userName,\n      email: userEmail,\n      password: userPassword,\n    };\n    signUpForm.reset();\n    localStorage.setItem(LOGIN_STORAGE_KEY, JSON.stringify(userData));\n    if (JSON.stringify(userData) !== 0) {\n      logIn(userData);\n    }\n    modalBackdrop.classList.add('visually-hidden');\n  }\n});\n\nfunction logOut() {\n  navListItems.forEach(navListItem => {\n    navListItem.classList.add('visually-hidden');\n  });\n  signUpForm.classList.remove('visually-hidden');\n  logOutButton.classList.add('visually-hidden');\n  mobileLogOutButton.classList.add('visually-hidden');\n  mobileSignUp.replaceChildren();\n  mobileSignUp.insertAdjacentHTML(\n    'beforeend',\n    'Sign-up<svg class=\"sign-up-icon\"><use href=\"./img/head-and-mobile-menu.svg#icon-arrow-narrow-right\"></svg>'\n  );\n  mobileSignUp.classList.remove('user-profile');\n  openModalButton.replaceChildren();\n  openModalButton.insertAdjacentHTML(\n    'beforeend',\n    `Sign-up<svg class=\"sign-up-icon\"><use href=\"./img/head-and-mobile-menu.svg#icon-arrow-narrow-right\"></svg>`\n  );\n  openModalButton.classList.remove('header-user');\n  openModalButton.removeEventListener('click', onMobileMenuBtnClick);\n  openModalButton.addEventListener('click', openLoginModal);\n  localStorage.removeItem(LOGIN_STORAGE_KEY);\n  mobileSignUp.disabled = false;\n  onMobileMenuBtnClick();\n}\n\nfunction logIn(userData) {\n  navListItems.forEach(navListItem => {\n    navListItem.classList.remove('visually-hidden');\n  });\n\n  openModalButton.replaceChildren();\n  openModalButton.insertAdjacentHTML(\n    'beforeend',\n    `<span class=\"user-icon-eclipse\"><svg class=\"user-icon\"><use href=\"./img/head-and-mobile-menu.svg#icon-user\"></svg></span> ${userData.name}<svg class=\"carret-down-icon\"><use href=\"./img/head-and-mobile-menu.svg#icon-carret-down\"></use></svg>`\n  );\n  openModalButton.classList.add('header-user');\n  openModalButton.removeEventListener('click', openLoginModal);\n  openModalButton.addEventListener('click', onMobileMenuBtnClick);\n  mobileSignUp.replaceChildren();\n  mobileSignUp.insertAdjacentHTML(\n    'beforeend',\n    `<span class=\"user-icon-eclipse\"><svg class=\"user-icon\"><use href=\"./img/head-and-mobile-menu.svg#icon-user\"></svg></span> ${userData.name}`\n  );\n  mobileSignUp.classList.add('user-profile');\n  signUpForm.classList.add('visually-hidden');\n  mobileLogOutButton.classList.remove('visually-hidden');\n  mobileLogOutButton.addEventListener('click', logOut);\n  logOutButton.classList.remove('visually-hidden');\n  logOutButton.addEventListener('click', logOut);\n  mobileSignUp.disabled = true;\n}\n\nfunction isLoggedIn() {\n  const userData = loadFromLS(LOGIN_STORAGE_KEY) || {};\n  const { name, email, password } = userData;\n  if (name && name.length > 0) {\n    logIn(userData);\n  }\n}\n\nfunction loadFromLS() {\n  try {\n    const result = data;\n    return result;\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nisLoggedIn();\n","import axios from 'axios';\nimport * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\n\nconst localStorageKey = 'shopping-list';\nexport default localStorageKey;\n\nlet addBtn;\nconst addedBooks = loadFromLS(localStorageKey) || [];\n\nexport const onclickGalleryItem = async event => {\n  event.preventDefault();\n\n  if (event.target.nodeName !== 'IMG') {\n    return;\n  }\n\n  const id = event.target.dataset.id;\n  const data = await getBookById(id);\n\n  createModalWindow(data);\n  addBtn = document.querySelector('.addBtn');\n  addBtn.addEventListener('click', refreshLocalStorage(data));\n\n  if (addedBooks.length > 0) {\n    const isBookAdded = addedBooks.some(book => id === book._id);\n    if (isBookAdded) {\n      addBtn.textContent = 'Remove from the shopping list';\n      addBtn.classList.add('mobileWidth');\n    } else {\n      addBtn.textContent = 'Add to shopping list';\n    }\n  }\n};\n\nasync function getBookById(id) {\n  const response = await axios.get(\n    `https://books-backend.p.goit.global/books/${id}`\n  );\n  return response.data;\n}\n\nfunction createModalWindow({\n  book_image,\n  author,\n  title,\n  description,\n  _id,\n  buy_links,\n}) {\n  if (description === '') {\n    description = 'Book description has not been added yet...';\n  }\n\n  const instance = basicLightbox.create(\n    `\n    <div class=\"item-modal\">\n        <button type=\"button\" class=\"closeModalBtn\">\n          <svg class=\"menu-btn-icon\">\n            <use href=\"./img/symbol-defs.svg#icon-Icon-close-modal\"></use>\n          </svg>\n        </button>\n        <div class=\"item-card\">\n            <div class=\"image-container\">\n              <img class=\"item-image\" src=\"${book_image}\" />\n            </div>\n            <div class=\"item-information\">\n              <h3 class=\"book-title\">${title}</h3>\n              <p class=\"book-author\">${author}</p>\n              <p class=\"book-description\">${description}</p>\n              <ul class=\"buy-links-container\"></ul>\n            </div>\n        </div>\n        <button type=\"submit\" class=\"addBtn\" id=\"addBtn\">Add to shopping list</button>\n    </div>\n    `,\n    {\n      onShow: instance => {\n        document.body.style.overflow = 'hidden';\n\n        const closeButton = instance.element().querySelector('.closeModalBtn');\n        closeButton.onclick = () => instance.close();\n        addBtn = instance.element().querySelector('.addBtn');\n      },\n      onClose: instance => {\n        document.body.style.overflow = 'visible';\n      },\n    }\n  );\n\n  const buyLinksContainer = instance\n    .element()\n    .querySelector('.buy-links-container');\n  searchBooksInShops(\n    { book_image, author, title, buy_links },\n    buyLinksContainer\n  );\n\n  instance.show();\n\n  const pressEscapeKey = e => {\n    if (e.key === 'Escape') {\n      instance.close();\n      document.removeEventListener('keydown', pressEscapeKey);\n    }\n  };\n\n  document.addEventListener('keydown', pressEscapeKey);\n}\n\nconst refreshLocalStorage = data => e => {\n  e.preventDefault();\n\n  if (e.target.textContent === 'Remove from the shopping list') {\n    e.target.textContent = 'Add to shopping list';\n    e.target.classList.remove('mobileWidth');\n\n    const indexToRemove = addedBooks.findIndex(book => book._id === data._id);\n    addedBooks.splice(indexToRemove, 1);\n    removeCongratulation();\n  } else {\n    e.target.textContent = 'Remove from the shopping list';\n    e.target.classList.add('mobileWidth');\n    addedBooks.push(data);\n    addCongratulation();\n  }\n  localStorage.setItem(localStorageKey, JSON.stringify(addedBooks));\n};\n\nfunction loadFromLS(key) {\n  const loadedStr = localStorage.getItem(key);\n\n  try {\n    const savedObject = JSON.parse(loadedStr);\n    return savedObject;\n  } catch {\n    return loadedStr;\n  }\n}\n\nfunction addCongratulation() {\n  const bookCard = document.querySelector('.item-modal');\n  const congratulationMessage = document.createElement('p');\n  congratulationMessage.className = 'congratulation';\n  congratulationMessage.textContent =\n    'Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.';\n  bookCard.appendChild(congratulationMessage);\n}\n\nfunction removeCongratulation() {\n  const congratulation = document.querySelector('.congratulation');\n  if (congratulation) congratulation.remove();\n}\n\nfunction searchBooksInShops(\n  { book_image, author, title, buy_links },\n  buyLinksContainer\n) {\n  buy_links.forEach(link => {\n    const itemElement = document.createElement('li');\n    buyLinksContainer.appendChild(itemElement);\n    const linkElement = document.createElement('a');\n    itemElement.appendChild(linkElement);\n    const iconElement = document.createElement('img');\n    linkElement.appendChild(iconElement);\n\n    itemElement.className = 'shop-link';\n    linkElement.target = '_blank';\n    iconElement.className = 'booksIcon';\n    iconElement.alt = link.name + ' Icon';\n\n    const url = `${book_image}`;\n    const fileName = url.split('/').pop();\n    const fileNameWithoutExtension = fileName.split('.')[0];\n\n    switch (link.name) {\n      case 'Amazon':\n        linkElement.href = link.url;\n        iconElement.src = './img/amazon.svg';\n        break;\n      case 'Apple Books':\n        linkElement.href = link.url;\n        iconElement.src = './img/apple.svg';\n        iconElement.className = 'booksIconApple';\n        break;\n      case 'Books-A-Million':\n        linkElement.href = `https://www.booksamillion.com/p/${title}/${author}/${fileNameWithoutExtension}`;\n        iconElement.src = './img/Books-A-Million_logo.svg';\n        break;\n      case 'Bookshop':\n        linkElement.href = `https://bookshop.org/search?keywords=${fileNameWithoutExtension}`;\n        iconElement.src = './img/bookshop.svg';\n        break;\n      case 'IndieBound':\n        linkElement.href = `https://bookshop.org/p/books/atomic-habits-an-easy-proven-way-to-build-good-habits-break-bad-ones-james-clear/12117739?ean=${fileNameWithoutExtension}`;\n        iconElement.src = './img/indiebound.svg';\n        break;\n      default:\n        linkElement.href = link.url;\n        iconElement.src = './img/another-shops.svg';\n        break;\n    }\n\n    if (\n      link.name !== 'Amazon' &&\n      link.name !== 'Apple Books' &&\n      link.name !== 'Barnes and Noble'\n    ) {\n      iconElement.width = '40';\n      iconElement.height = '40';\n    }\n  });\n}\n","import axios from 'axios';\nimport { onclickGalleryItem } from '../js/modal-window';\n\nconst BASE_URL = 'https://books-backend.p.goit.global/';\nrenderTopCategoryBooks();\n\nasync function getTopFiveBooks() {\n  try {\n    const response = await axios.get(BASE_URL + 'books/top-books');\n    return response;\n  } catch (error) {\n    alert('Something went wrong, please try again.');\n    return error;\n  }\n}\n\nasync function renderTopCategoryBooks() {\n  const topBookList = document.querySelector('.top-books-list');\n  const topBooks = await getTopFiveBooks();\n  topBooks.data.map(book => {\n    const categoryBox = createCategoryBox(book);\n    topBookList.insertAdjacentHTML('beforeend', categoryBox);\n  });\n  addListenerToCards()\n}\n\nfunction slicePhrase(length, phrase) {\n  if (phrase.length > length) {\n    return phrase.slice(0, length) + '...';\n  } else {\n    return phrase;\n  }\n}\n\nfunction createCategoryBox(category) {\n  const bookList = category.books.map(book => createBookCard(book)).join('');\n  return `\n  <li class=\"top-category\" >\n    <p class=\"top-category-name\">${category.list_name}</p>\n    <ul class=\"top-category-list\">${bookList}</ul>\n      <button value=\"${category.list_name}\" class=\"top-books-btn\">See more</button></li>\n        `;\n}\n\nfunction createBookCard({ book_image, _id, title, author }) {\n  return `<li class=\"top-book-list\" >\n      <img src=\"${book_image}\" \n      alt=\"${title}\" class=\"top-book-img\" data-id=\"${_id}\"/>\n      <h2 class=\"top-book-title\">${slicePhrase(16, title)}</h2>\n      <p class=\"top-book-author\">${slicePhrase(16, author)}</p>\n    </li>`;\n}\nfunction addListenerToCards() {\n  const galleryImg = document.querySelectorAll('.top-book-img');\n  galleryImg.forEach(img => {\n    img.addEventListener('click', onclickGalleryItem);\n  });\n}\n","const toggleButton = document.querySelector('.theme-toggle');\nconst head = document.querySelector('head');\n\nif (localStorage.getItem('theme') === 'true') {\n  toggleButton.checked = 'true';\n  toggleTheme();\n}\n\ntoggleButton.addEventListener('click', darkThemeOnButtonClick);\n\nfunction darkThemeOnButtonClick() {\n  toggleTheme();\n}\n\nfunction toggleTheme() {\n  let temp = toggleButton.checked;\n  localStorage.setItem('theme', JSON.stringify(temp));\n  if (temp) {\n    const linkElement = document.createElement('link');\n    linkElement.setAttribute('rel', 'stylesheet');\n    linkElement.setAttribute('href', '/css/dark-theme.css');\n    head.insertAdjacentElement('beforeend', linkElement);\n  } else {\n    const addedElement = head.querySelector('link[href=\"/css/dark-theme.css\"]');\n    if (addedElement) {\n      addedElement.remove();\n    }\n  }\n}\n","import axios from 'axios';\n\nfunction getBooks() {\n  const outputDiv = document.getElementById('output');\n  outputDiv.innerHTML = '';\n\n  outputDiv.innerHTML = '<div class=\"loader\">Loading...</div>';\n\n  axios\n    .get(\n      'https://openlibrary.org/search.json?q=' +\n        document.getElementById('input').value\n    )\n    .then(response => {\n      outputDiv.innerHTML = '';\n      for (let i = 0; i < 10 && i < response.data.docs.length; i++) {\n        if (response.data.docs[i].title) {\n          outputDiv.innerHTML +=\n            '<h2 class=\"book-search-title\">' +\n            response.data.docs[i].title +\n            '</h2>' +\n            (response.data.docs[i].author_name\n              ? response.data.docs[i].author_name[0]\n              : 'Invisible author') +\n            '<br><img class=\"books-search-cover\" src=\"https://covers.openlibrary.org/b/isbn/' +\n            response.data.docs[i].isbn[0] +\n            '-M.jpg\"><br>';\n        } else {\n          console.log('Heading not found for element with index ' + i);\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error occurred while fetching books:', error);\n      outputDiv.innerHTML = '';\n    });\n}\n\nfunction handleButtonClick() {\n  getBooks();\n}\n\ndocument\n  .getElementById('buttonId')\n  .addEventListener('click', handleButtonClick);\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const outputDiv = document.getElementById('output');\n  outputDiv.innerHTML = '';\n});\n","import { onclickGalleryItem } from '../js/modal-window';\n\nasync function getBooks(category) {\n  try {\n    let url = `https://books-backend.p.goit.global/books/category?category=${category}`;\n\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error('Failed to fetch books');\n    }\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error(error);\n    return [];\n  }\n}\n\nasync function displayBooks(category) {\n  const booksList = document.querySelector('.books-list');\n  if (booksList) {\n    booksList.innerHTML = ''; // Очистимо список книг перед відображенням нових\n    const books = await getBooks(category);\n    books.forEach(book => {\n      const bookInfoHTML = `\n                        <div class=\"book\">\n                            <img class=\"image_book\" src=\"${book.book_image}\"  data-id=\"${book._id}\"alt=\"Book Image\">\n                            <h2 class=\"title_book\"> ${book.title}</h2>\n                            <p class=\"test_book\"> ${book.contributor}</p>\n                        </div>\n                    `;\n      booksList.innerHTML += bookInfoHTML;\n    });\n    document.getElementById('selectedCategory').textContent = category;\n  } else {\n    console.error('Element with class \"books-list\" not found');\n  }\n}\ndocument.addEventListener('DOMContentLoaded', () => {\n  const categoryList = document.getElementById('categoryList');\n  if (categoryList) {\n    categoryList.addEventListener('click', event => {\n      if (event.target && event.target.matches('li.category-item')) {\n        let category = event.target.textContent;\n        if (category === 'All Categories') {\n          category = \" \"; // Якщо обрано \"All Categories\", передаємо порожній рядок\n        }\n\n        const categoryItems = categoryList.querySelectorAll('.category-item');\n        categoryItems.forEach(item => {\n          item.classList.remove('active');\n        });\n        event.target.classList.add('active');\n        displayBooks(category);\n      }\n    });\n  } else {\n    console.error('Element with id \"categoryList\" not found');\n  }\n});\n\nfetch('https://books-backend.p.goit.global/books/category-list')\n  .then(response => response.json())\n  .then(data => {\n    data.sort((a, b) => a.list_name.localeCompare(b.list_name));\n\n    const categoryList = document.getElementById('categoryList');\n\n    data.forEach(item => {\n      const category = item.list_name;\n      const listItem = document.createElement('li');\n      listItem.textContent = category;\n      listItem.classList.add('category-item');\n      categoryList.appendChild(listItem);\n    });\n  })\n  .catch(error => console.error('Error fetching data:', error));\n\nconst bookList = document.querySelector('.books-list');\nbookList.addEventListener('click', onclickGalleryItem);\n"],"names":["mobileMenuBtn","mobileMenu","onMobileMenuBtnClick","signUpForm","logOutButton","LOGIN_STORAGE_KEY","data","event","userName","userEmail","userPassword","userData","logIn","modalBackdrop","logOut","navListItems","navListItem","mobileLogOutButton","mobileSignUp","openModalButton","openLoginModal","isLoggedIn","loadFromLS","name","email","password","error","localStorageKey","addBtn","addedBooks","onclickGalleryItem","id","getBookById","createModalWindow","refreshLocalStorage","book","axios","book_image","author","title","description","_id","buy_links","instance","basicLightbox.create","closeButton","buyLinksContainer","searchBooksInShops","pressEscapeKey","e","indexToRemove","removeCongratulation","addCongratulation","key","loadedStr","bookCard","congratulationMessage","congratulation","link","itemElement","linkElement","iconElement","fileNameWithoutExtension","BASE_URL","renderTopCategoryBooks","getTopFiveBooks","topBookList","categoryBox","createCategoryBox","addListenerToCards","slicePhrase","length","phrase","category","bookList","createBookCard","img","toggleButton","head","toggleTheme","darkThemeOnButtonClick","temp","addedElement","getBooks","outputDiv","response","i","handleButtonClick","url","displayBooks","booksList","bookInfoHTML","categoryList","item","a","b","listItem"],"mappings":"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"}