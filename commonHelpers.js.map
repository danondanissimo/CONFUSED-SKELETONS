{"version":3,"file":"commonHelpers.js","sources":["../src/js/best-sellers.js","../src/js/books-search.js","../src/js/sidebar.js"],"sourcesContent":["import axios from 'axios';\n\nimport { onclickGalleryItem } from '../js/modal-window';\n\nconst topBooksContainer = document.querySelector('.top-books-container');\n\nconst BASE_URL = 'https://books-backend.p.goit.global/';\nrenderTopCategoryBooks();\naddListenerToCards();\nasync function getTopFiveBooks() {\n  try {\n    const response = await axios.get(BASE_URL + 'books/top-books');\n    return response;\n  } catch (error) {\n    alert('Something went wrong, please try again.');\n    return error;\n  }\n}\nasync function getBooksByCategory(selectedCategory) {\n  try {\n    const data = await axios.get(\n      BASE_URL + `books/category?category=${selectedCategory}`\n    );\n\n    return data;\n  } catch (error) {\n    alertError('Something went wrong, please try again.');\n    return error;\n  }\n}\n\nexport async function renderTopCategoryBooks() {\n  topBooksContainer.replaceChildren();\n  topBooksContainer.insertAdjacentHTML(\n    'afterbegin',\n    `  <h1 class=\"best-sellers-title\">\n    Best sellers <span class=\"best-sellers-title-accent\">Books</span>\n  </h1>\n  <ul class=\"top-books-list\"></ul>`\n  );\n  const topBookList = document.querySelector('.top-books-list');\n  const topBooks = await getTopFiveBooks();\n  topBooks.data.map(book => {\n    const categoryBox = createCategoryBox(book);\n    topBookList.insertAdjacentHTML('beforeend', categoryBox);\n  });\n  addListenerToCards();\n  const topBooksBtn = document.querySelectorAll('.top-books-btn');\n  topBooksBtn.forEach(btn => btn.addEventListener('click', handleSeeMore))\n}\n\nfunction slicePhrase(length, phrase) {\n  if (phrase.length > length) {\n    return phrase.slice(0, length) + '...';\n  } else {\n    return phrase;\n  }\n}\n\nfunction createCategoryBox(category) {\n  const bookList = category.books.map(book => createBookCard(book)).join('');\n  return `\n  <li class=\"top-category\" >\n    <p class=\"top-category-name\">${category.list_name}</p>\n    <ul class=\"top-category-list\">${bookList}</ul>\n      <button value=\"${category.list_name}\" class=\"top-books-btn\">See more</button></li>\n        `;\n}\nfunction createBookCard(book_obj) {\n  return `<li class=\"top-book-list\" value=\"${book_obj.list_item}\">\n      <img src=\"${book_obj.book_image}\" \n      alt=\"${book_obj.title}\" class=\"top-book-img\" data-id=\"${book_obj._id}\"/>\n      <h2 class=\"top-book-title\">${slicePhrase(16, book_obj.title)}</h2>\n      <p class=\"top-book-author\">${slicePhrase(16, book_obj.author)}</p>\n\n    </li>`;\n}\nfunction handleSeeMore(e) {\n  e.preventDefault();\n  getBooksByCategory(e.target.value).then(data => {\n    const targetTitle = colorizeLastWord(e.target.value)\n    topBooksContainer.innerHTML = `<div class=\"box-in-box\">\n    <h1 class=\"best-sellers-title\" id=\"selectedCategory\">${targetTitle}\n      <span class=\"titlecategory\"></span>\n    </h1>\n    <ul class=\"books-list\">${createBooks(data)}</ul>\n  </div>`;\n    addListenerToCards();\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n    const categoryItems = document.querySelectorAll('.category-item');\n    categoryItems.forEach(item => {\n      e.target.value === item.textContent ? item.classList.add('active') : item.classList.remove('active');\n    })\n  })\n   \n}\nfunction addListenerToCards() {\n  const galleryImg = document.querySelectorAll('.top-book-img');\n  galleryImg.forEach(img => {\n    img.addEventListener('click', onclickGalleryItem);\n  });\n}\n\nfunction createBooks(arr) {\n  return arr.data.map(item => createBookCard(item)).join('');\n}\nfunction colorizeLastWord(sentence) {\n  const words = sentence.split(' ');\n  const lastWord = words.pop();\n  const restOfSentence = words.map(word => `<span>${word}</span>`).join(' ');\n\n  return `${restOfSentence} <span class=\"best-sellers-title-accent\">${lastWord}</span>`;\n}\n\n","import axios from 'axios';\n\nfunction getBooks() {\n  const outputDiv = document.getElementById('output');\n  outputDiv.innerHTML = '';\n\n  outputDiv.innerHTML = '<div class=\"loader\">Loading...</div>';\n\n  axios\n    .get(\n      'https://openlibrary.org/search.json?q=' +\n        document.getElementById('input').value\n    )\n    .then(response => {\n      outputDiv.innerHTML = '';\n      for (let i = 0; i < 10 && i < response.data.docs.length; i++) {\n        if (response.data.docs[i].title) {\n          outputDiv.innerHTML +=\n            '<h2 class=\"book-search-title\">' +\n            response.data.docs[i].title +\n            '</h2>' +\n            (response.data.docs[i].author_name\n              ? response.data.docs[i].author_name[0]\n              : 'Invisible author') +\n            '<br><img class=\"books-search-cover\" src=\"https://covers.openlibrary.org/b/isbn/' +\n            response.data.docs[i].isbn[0] +\n            '-M.jpg\"><br>';\n        } else {\n          console.log('Heading not found for element with index ' + i);\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error occurred while fetching books:', error);\n      outputDiv.innerHTML = '';\n    });\n}\n\nfunction handleButtonClick() {\n  getBooks();\n}\n\ndocument\n  .getElementById('buttonId')\n  .addEventListener('click', handleButtonClick);\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const outputDiv = document.getElementById('output');\n  outputDiv.innerHTML = '';\n});\n","import { onclickGalleryItem } from '../js/modal-window';\nimport { renderTopCategoryBooks } from './best-sellers';\n\nconst bestSellersContainer = document.querySelector('.top-books-container');\n\nasync function getBooks(category) {\n  if (category.length !== 0) {\n    try {\n      let url = `https://books-backend.p.goit.global/books/category?category=${category}`;\n\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error('Failed to fetch books');\n      }\n      const data = await response.json();\n      return data;\n    } catch (error) {\n      console.error(error);\n      return [];\n    }\n  } else {\n    console.log('Hello sir ');\n  }\n}\n\nasync function displayBooks(category) {\n  const booksList = document.querySelector('.books-list');\n  if (booksList) {\n    booksList.innerHTML = ''; // Очистимо список книг перед відображенням нових\n    const books = await getBooks(category);\n    books.forEach(book => {\n      const bookInfoHTML = `\n                        <div class=\"book\">\n                            <img class=\"image_book\" src=\"${book.book_image}\"  data-id=\"${book._id}\"alt=\"Book Image\">\n                            <h2 class=\"title_book\"> ${book.title}</h2>\n                            <p class=\"test_book\"> ${book.contributor}</p>\n                        </div>\n                    `;\n      booksList.innerHTML += bookInfoHTML;\n    });\n    const arrCategory = category.split(' ');\n    const lastWord = arrCategory.at(-1);\n    document.querySelector('.titlecategory').textContent = lastWord;\n    arrCategory.pop();\n    const newCategory = arrCategory.join(' ');\n    document\n      .getElementById('selectedCategory')\n      .insertAdjacentHTML('afterbegin', newCategory);\n  } else {\n    console.error('Element with class \"books-list\" not found');\n  }\n}\ndocument.addEventListener('DOMContentLoaded', () => {\n  const categoryList = document.getElementById('categoryList');\n  if (categoryList) {\n    categoryList.addEventListener('click', event => {\n      bestSellersContainer.replaceChildren();\n      bestSellersContainer.insertAdjacentHTML(\n        'afterbegin',\n        `<div class=\"box-in-box\">\n    <h1 class=\"title-category-page\" id=\"selectedCategory\">\n      <span class=\"titlecategory\"></span>\n    </h1>\n    <ul class=\"books-list\"></ul>\n  </div>`\n      );\n\n      const bookList = document.querySelector('.books-list');\n      bookList.addEventListener('click', onclickGalleryItem);\n\n      if (event.target && event.target.matches('li.category-item')) {\n        let category = event.target.textContent;\n\n        // Встановлюємо клас \"active\" для поточного елемента та видаляємо його для інших\n        const categoryItems = categoryList.querySelectorAll('.category-item');\n        categoryItems.forEach(item => {\n          item.classList.remove('active');\n        });\n        event.target.classList.add('active');\n\n        if (category == 'All categories') {\n          renderTopCategoryBooks();\n          return;\n        }\n\n        displayBooks(category);\n      }\n    });\n\n    // Встановлюємо клас \"active\" для першого елемента (\"All categories\")\n    const firstCategoryItem = categoryList.querySelector('.category-item');\n    firstCategoryItem.classList.add('active');\n  } else {\n    console.error('Element with id \"categoryList\" not found');\n  }\n});\n\nfetch('https://books-backend.p.goit.global/books/category-list')\n  .then(response => response.json())\n  .then(data => {\n    data.sort((a, b) => a.list_name.localeCompare(b.list_name));\n\n    const categoryList = document.getElementById('categoryList');\n\n    data.forEach(item => {\n      const category = item.list_name;\n      const listItem = document.createElement('li');\n      listItem.textContent = category;\n      listItem.classList.add('category-item');\n      categoryList.appendChild(listItem);\n    });\n  })\n  .catch(error => console.error('Error fetching data:', error));\n"],"names":["topBooksContainer","BASE_URL","renderTopCategoryBooks","addListenerToCards","getTopFiveBooks","axios","error","getBooksByCategory","selectedCategory","topBookList","book","categoryBox","createCategoryBox","btn","handleSeeMore","slicePhrase","length","phrase","category","bookList","createBookCard","book_obj","e","data","targetTitle","colorizeLastWord","createBooks","item","img","onclickGalleryItem","arr","sentence","words","lastWord","word","getBooks","outputDiv","response","i","handleButtonClick","bestSellersContainer","url","displayBooks","booksList","bookInfoHTML","arrCategory","newCategory","categoryList","event","a","b","listItem"],"mappings":"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"}