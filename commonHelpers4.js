import{m as R,n as F,a as m,s as A,b as j,c as x,d as E}from"./assets/footer-fa9d95b2.js";import"./assets/vendor-b619ac7a.js";const S=document.querySelector(".sign-up-form"),O=document.querySelector(".log-out-button"),N=document.querySelector(".header-log-out-button"),I="sign-up-form-state";let z=JSON.parse(localStorage.getItem(I))||"";S.addEventListener("submit",l=>{localStorage.removeItem(I),l.preventDefault();const b=l.currentTarget.elements.name.value.trim(),g=l.currentTarget.elements.email.value.trim(),B=l.currentTarget.elements.password.value.trim();if(b.length===0||g.length===0||B.length===0)alert("All form fields must be filled in");else{const p={name:b,email:g,password:B};S.reset(),localStorage.setItem(I,JSON.stringify(p)),JSON.stringify(p)!==0&&D(p),R.classList.add("visually-hidden")}});function $(){F.forEach(l=>{l.classList.add("visually-hidden")}),S.classList.remove("visually-hidden"),O.classList.add("visually-hidden"),E.classList.add("visually-hidden"),x.replaceChildren(),x.insertAdjacentHTML("beforeend",`Sign-up<svg class="sign-up-icon"><use href="${A}#icon-arrow-narrow-right"></svg>`),x.classList.remove("user-profile"),m.replaceChildren(),m.insertAdjacentHTML("beforeend",`Sign-up<svg class="sign-up-icon"><use href="${A}#icon-arrow-narrow-right"></svg>`),m.classList.remove("header-user"),m.removeEventListener("click",T),m.addEventListener("click",j),localStorage.removeItem(I),x.disabled=!1,T()}function D(l){F.forEach(b=>{b.classList.remove("visually-hidden")}),m.replaceChildren(),m.insertAdjacentHTML("beforeend",`<span class="user-icon-eclipse"><svg class="user-icon"><use href="${A}#icon-user"></svg></span> ${l.name}<svg class="carret-down-icon"><use href="${A}#icon-carret-down"></use></svg>`),m.classList.add("header-user"),m.removeEventListener("click",j),m.addEventListener("click",T),N.addEventListener("click",V),x.replaceChildren(),x.insertAdjacentHTML("beforeend",`<span class="user-icon-eclipse"><svg class="user-icon"><use href="${A}#icon-user"></svg></span> ${l.name}`),x.classList.add("user-profile"),S.classList.add("visually-hidden"),E.classList.remove("visually-hidden"),E.addEventListener("click",$),O.classList.remove("visually-hidden"),O.addEventListener("click",$),x.disabled=!0}function W(){const l=Y()||{},{name:b,email:g,password:B}=l;b&&b.length>0&&D(l)}function Y(){try{return z}catch(l){console.error(l)}}W();function T(){N.classList.remove("hidden"),m.classList.add("hidden")}function V(){$(),N.classList.add("hidden"),m.classList.remove("hidden")}const Q="/CONFUSED-SKELETONS/assets/icon_delete_sprite-d9a6b0ff.svg";let t={placeForBookList:document.querySelector(".shl-books-list"),onEmptyLocalStorageField:document.querySelector(".no-books-in-local-storage"),paginationBlock:document.querySelector(".shl-pagination-block"),firstPaginationButton:document.querySelector(".shl-pagination-button-first"),previousPaginationButton:document.querySelector(".shl-pagination-button-previous"),onePaginationButton:document.querySelector(".shl-pagination-button-one"),twoPaginationButton:document.querySelector(".shl-pagination-button-two"),freePaginationButton:document.querySelector(".shl-pagination-button-free"),morePaginationButton:document.querySelector(".shl-pagination-button-more"),nextPaginationButton:document.querySelector(".shl-pagination-button-next"),lastPaginationButton:document.querySelector(".shl-pagination-button-last")},r=[],k=[];const H="shopping-list";let s=1,i=1,d=0,v=0,f=0,L=0,_=!1;const u=window.innerWidth>768?3:4,q=window.innerWidth<768,e=[t.onePaginationButton,t.twoPaginationButton,t.freePaginationButton,t.morePaginationButton],n=[t.onePaginationButton,t.freePaginationButton,t.morePaginationButton],o=e.findIndex(l=>l===t.morePaginationButton);let a=0;function h(l){return l.findIndex(g=>g.classList.contains("shl-active"))}function J(){k=[]}function X(l){const b=JSON.parse(localStorage.getItem(l));if(b&&b.length>0)return r=b,r}function U(){r.length>0?(t.onEmptyLocalStorageField.classList.add("hide"),c(s,u,r),M()):t.onEmptyLocalStorageField.classList.remove("hide")}X(H);U();t.placeForBookList.addEventListener("click",tt);t.paginationBlock.addEventListener("click",Z);function Z(l){_=!0;const b=l.target.classList[0],g=parseInt(l.target.textContent,10);if(q)switch(b){case"shl-pagination-button-first":n[h(n)].classList.remove("shl-active"),i=1,s=1,c(s,u,r),t.firstPaginationButton.setAttribute("disabled","true"),t.previousPaginationButton.setAttribute("disabled","true"),n[0].classList.add("shl-active"),t.nextPaginationButton.removeAttribute("disabled"),t.lastPaginationButton.removeAttribute("disabled"),n[0].textContent=i,n[1].textContent=i+1,n[2].textContent="...";break;case"shl-pagination-button-previous":a=h(n),n[0].textContent=="..."?(v=parseInt(n[1].textContent,10)-1,v>=2?(i=i-1,s=i,c(s,u,r),a>1?(n[1].textContent=i,n[a].classList.remove("shl-active"),n[1].classList.add("shl-active"),n[2].textContent="...",t.nextPaginationButton.removeAttribute("disabled"),t.lastPaginationButton.removeAttribute("disabled")):n[1].textContent=i):(i=1,s=i,n[0].textContent=i,n[a].classList.remove("shl-active"),n[0].classList.add("shl-active"),c(s,u,r),t.firstPaginationButton.setAttribute("disabled","true"),t.previousPaginationButton.setAttribute("disabled","true"),t.nextPaginationButton.removeAttribute("disabled"),t.lastPaginationButton.removeAttribute("disabled"))):(i=i-1,s=i,c(s,u,r),n[a].classList.remove("shl-active"),n[a-1].classList.add("shl-active"),a-1===0&&(t.firstPaginationButton.setAttribute("disabled","true"),t.previousPaginationButton.setAttribute("disabled","true")));break;case"shl-pagination-button-one":a=h(n),!n.length===d&&(n[2].textContent="..."),g===1?(i=1,s=i,n[a].classList.remove("shl-active"),n[0].classList.add("shl-active"),c(s,u,r),t.firstPaginationButton.setAttribute("disabled","true"),t.previousPaginationButton.setAttribute("disabled","true")):(L=parseInt(n[1].textContent,10),v=L-1,v>=2?(n[1].textContent=L-1,i=parseInt(n[1].textContent,10),n[a].classList.remove("shl-active"),n[1].classList.add("shl-active"),s=i,c(s,u,r),t.nextPaginationButton.removeAttribute("disabled"),t.lastPaginationButton.removeAttribute("disabled")):(i=1,s=i,n[0].textContent=1,n[a].classList.remove("shl-active"),n[0].classList.add("shl-active"),c(s,u,r),t.firstPaginationButton.setAttribute("disabled","true"),t.previousPaginationButton.setAttribute("disabled","true"),t.nextPaginationButton.removeAttribute("disabled"),t.lastPaginationButton.removeAttribute("disabled")));break;case"shl-pagination-button-free":n[h(n)].classList.remove("shl-active"),i=g,s=i,n[1].classList.add("shl-active"),c(s,u,r);break;case"shl-pagination-button-more":a=h(n),!n.length===d&&(n[0].textContent="..."),n[2].textContent=="..."?(f=parseInt(n[1].textContent,10),v=d-f,v>=2?(n[1].textContent=f+1,i=parseInt(n[1].textContent,10),s=i,c(s,u,r),n[0].textContent="...",t.firstPaginationButton.removeAttribute("disabled"),t.previousPaginationButton.removeAttribute("disabled"),!a===1&&(n[a].classList.remove("shl-active"),n[1].classList.add("shl-active"))):(i=d,s=i,n[2].textContent=d,n[a].classList.remove("shl-active"),n[2].classList.add("shl-active"),c(s,u,r),t.nextPaginationButton.setAttribute("disabled","true"),t.lastPaginationButton.setAttribute("disabled","true"),!n.length===d&&(t.firstPaginationButton.removeAttribute("disabled"),t.previousPaginationButton.removeAttribute("disabled")))):(n[a].classList.remove("shl-active"),i=d,s=i,c(s,u,r),t.nextPaginationButton.setAttribute("disabled","true"),t.lastPaginationButton.setAttribute("disabled","true"),n[2].classList.add("shl-active"),!e.length===d&&(t.firstPaginationButton.removeAttribute("disabled"),t.previousPaginationButton.removeAttribute("disabled")));break;case"shl-pagination-button-next":a=h(n),n[2].textContent=="..."&&(f=parseInt(n[1].textContent,10),v=d-i,v>=2?(i=i+1,s=i,c(s,u,r),a<1?(n[a].classList.remove("shl-active"),n[1].classList.add("shl-active"),n[a].textContent=i,n[0].textContent="..."):(n[a].textContent=i,t.firstPaginationButton.removeAttribute("disabled"),t.previousPaginationButton.removeAttribute("disabled"))):(i=d,s=i,c(s,u,r),t.nextPaginationButton.setAttribute("disabled","true"),t.lastPaginationButton.setAttribute("disabled","true"),n[a].classList.remove("shl-active"),n[2].textContent=i,n[2].classList.add("shl-active")));break;case"shl-pagination-button-last":n[h(n)].classList.remove("shl-active"),i=d,s=i,t.nextPaginationButton.setAttribute("disabled","true"),t.lastPaginationButton.setAttribute("disabled","true"),n[2].textContent=i,n[2].classList.add("shl-active"),c(s,u,r),n[1].textContent=i-1,n[0].textContent="...",t.firstPaginationButton.removeAttribute("disabled"),t.previousPaginationButton.removeAttribute("disabled");break}else switch(b){case"shl-pagination-button-first":e[h(e)].classList.remove("shl-active"),i=1,s=1,c(s,u,r),t.firstPaginationButton.setAttribute("disabled","true"),t.previousPaginationButton.setAttribute("disabled","true"),e[0].classList.add("shl-active"),t.nextPaginationButton.removeAttribute("disabled"),t.lastPaginationButton.removeAttribute("disabled"),e[o-3].textContent=i,e[o-1].textContent=i+2,e[o-2].textContent=i+1,e[o].textContent="...";break;case"shl-pagination-button-previous":a=h(e),e[o-3].textContent=="..."?(v=parseInt(e[o-2].textContent,10)-1,v>=2?(i=i-1,s=i,c(s,u,r),a>1?(e[a].classList.remove("shl-active"),e[a-1].classList.add("shl-active")):(e[a].textContent=i,e[a+1].textContent=i+1,e[a+2].textContent="...",t.nextPaginationButton.removeAttribute("disabled"),t.lastPaginationButton.removeAttribute("disabled"))):(i=1,s=i,e[o-3].textContent=i,e[a].classList.remove("shl-active"),e[o-3].classList.add("shl-active"),c(s,u,r),t.firstPaginationButton.setAttribute("disabled","true"),t.previousPaginationButton.setAttribute("disabled","true"),t.nextPaginationButton.removeAttribute("disabled"),t.lastPaginationButton.removeAttribute("disabled"))):(i=i-1,s=i,c(s,u,r),e[a].classList.remove("shl-active"),e[a-1].classList.add("shl-active"),a-1===0&&(t.firstPaginationButton.setAttribute("disabled","true"),t.previousPaginationButton.setAttribute("disabled","true")));break;case"shl-pagination-button-one":a=h(e),!e.length===d&&(e[o].textContent="..."),g===1?(i=1,s=i,e[a].classList.remove("shl-active"),e[i-1].classList.add("shl-active"),c(s,u,r),t.firstPaginationButton.setAttribute("disabled","true"),t.previousPaginationButton.setAttribute("disabled","true")):(L=parseInt(e[o-2].textContent,10),v=L-1,v>2?(e[o-2].textContent=L-2,e[o-1].textContent=L-1,i=parseInt(e[o-1].textContent,10),e[a].classList.remove("shl-active"),e[o-1].classList.add("shl-active"),s=i,c(s,u,r),t.nextPaginationButton.removeAttribute("disabled"),t.lastPaginationButton.removeAttribute("disabled")):v===2?(e[o].textContent="...",e[o-2].textContent=L-1,e[o-1].textContent=L,i=parseInt(e[o-1].textContent,10),e[a].classList.remove("shl-active"),e[o-1].classList.add("shl-active"),s=i,c(s,u,r),e[o-3].textContent=1,t.firstPaginationButton.setAttribute("disabled","true"),t.previousPaginationButton.setAttribute("disabled","true"),t.nextPaginationButton.removeAttribute("disabled"),t.lastPaginationButton.removeAttribute("disabled")):(i=1,s=i,e[o-3].textContent=1,e[a].classList.remove("shl-active"),e[i-1].classList.add("shl-active"),c(s,u,r),t.firstPaginationButton.setAttribute("disabled","true"),t.previousPaginationButton.setAttribute("disabled","true"),t.nextPaginationButton.removeAttribute("disabled"),t.lastPaginationButton.removeAttribute("disabled")));break;case"shl-pagination-button-two":e[h(e)].classList.remove("shl-active"),i=g,s=i,e[o-2].classList.add("shl-active"),c(s,u,r);break;case"shl-pagination-button-free":e[h(e)].classList.remove("shl-active"),i=g,s=i,e[o-1].classList.add("shl-active"),c(s,u,r);break;case"shl-pagination-button-more":a=h(e),!e.length===d&&(e[o-3].textContent="..."),e[o].textContent=="..."?(f=parseInt(e[o-1].textContent,10),v=d-f,v>2?(e[o-1].textContent=f+2,e[o-2].textContent=f+1,i=parseInt(e[o-2].textContent,10),e[a].classList.remove("shl-active"),e[o-2].classList.add("shl-active"),s=i,c(s,u,r),t.firstPaginationButton.removeAttribute("disabled"),t.previousPaginationButton.removeAttribute("disabled")):v===2?(e[o-3].textContent="...",e[o-1].textContent=f+1,e[o-2].textContent=f,i=parseInt(e[o-2].textContent,10),e[a].classList.remove("shl-active"),e[o-2].classList.add("shl-active"),s=i,c(s,u,r),e[o].textContent=d,t.nextPaginationButton.setAttribute("disabled","true"),t.lastPaginationButton.setAttribute("disabled","true"),t.firstPaginationButton.removeAttribute("disabled"),t.previousPaginationButton.removeAttribute("disabled")):(i=d,s=i,e[o].textContent=d,e[a].classList.remove("shl-active"),e[o].classList.add("shl-active"),c(s,u,r),t.nextPaginationButton.setAttribute("disabled","true"),t.lastPaginationButton.setAttribute("disabled","true"),!e.length===d&&(t.firstPaginationButton.removeAttribute("disabled"),t.previousPaginationButton.removeAttribute("disabled")))):(e[a].classList.remove("shl-active"),i=d,s=i,c(s,u,r),t.nextPaginationButton.setAttribute("disabled","true"),t.lastPaginationButton.setAttribute("disabled","true"),e[o].classList.add("shl-active"),!e.length===d&&(t.firstPaginationButton.removeAttribute("disabled"),t.previousPaginationButton.removeAttribute("disabled")));break;case"shl-pagination-button-next":a=h(e),e[o].textContent=="..."&&(f=parseInt(e[o-1].textContent,10),v=d-i,v>=2?(i=i+1,s=i,c(s,u,r),a<2?(e[a].classList.remove("shl-active"),e[a+1].classList.add("shl-active")):(e[a].textContent=i,e[a-1].textContent=i-1,t.firstPaginationButton.removeAttribute("disabled"),t.previousPaginationButton.removeAttribute("disabled"),e[o-3].textContent="...")):(i=d,s=i,c(s,u,r),t.nextPaginationButton.setAttribute("disabled","true"),t.lastPaginationButton.setAttribute("disabled","true"),e[a].classList.remove("shl-active"),e[o].textContent=i,e[o].classList.add("shl-active")));break;case"shl-pagination-button-last":e[h(e)].classList.remove("shl-active"),i=d,s=i,t.nextPaginationButton.setAttribute("disabled","true"),t.lastPaginationButton.setAttribute("disabled","true"),e[o].textContent=i,e[o].classList.add("shl-active"),c(s,u,r),e[o-1].textContent=i-1,e[o-2].textContent=i-2,e[o-3].textContent="...",t.firstPaginationButton.removeAttribute("disabled"),t.previousPaginationButton.removeAttribute("disabled");break}}function tt(l){if(_=!0,l.target.closest(".shl-card-delete-button")){const g=l.target.closest(".shl-book-card").dataset.id;document.querySelector(`[data-id="${g}"]`).remove(),it(g,r)&&nt(r),d>1?i===d?(document.getElementsByClassName("shl-book-card").length===0&&(i=i-1,c(i,u,r)),M()):(et(u-1,r),M()):r.length==0&&U()}else return}function M(){if(t.firstPaginationButton.textContent="<<",t.previousPaginationButton.textContent="<",t.lastPaginationButton.textContent=">>",t.nextPaginationButton.textContent=">",d=Math.ceil(r.length/u),d>1)t.paginationBlock.classList.remove("hide"),_||(t.onePaginationButton.classList.add("shl-active"),t.firstPaginationButton.setAttribute("disabled","true"),t.previousPaginationButton.setAttribute("disabled","true"),q&&(t.twoPaginationButton.classList.add("hide"),t.freePaginationButton.textContent=2));else{if(t.paginationBlock.classList.contains("hide"))return;t.paginationBlock.classList.add("hide")}q?(d<=n.length&&(t.lastPaginationButton.setAttribute("disabled","true"),t.nextPaginationButton.setAttribute("disabled","true")),d===3&&(n[2].textContent=3,n[1].textContent=2,n[0].textContent=1),d===2&&(n[2].setAttribute("disabled","true"),n[1].textContent=2,n[0].textContent=1,a=h(n),a===2&&(n[2].classList.remove("shl-active"),n[1].classList.add("shl-active")))):(d<=e.length&&(t.lastPaginationButton.setAttribute("disabled","true"),t.nextPaginationButton.setAttribute("disabled","true")),d===4&&(e[3].textContent=4,e[2].textContent=3,e[1].textContent=2,e[0].textContent=1),d===3&&(e[3].setAttribute("disabled","true"),e[2].textContent=3,e[1].textContent=2,e[0].textContent=1,a=h(e),a===3&&(e[3].classList.remove("shl-active"),e[2].classList.add("shl-active"))),d===2&&(e[3].setAttribute("disabled","true"),e[2].setAttribute("disabled","true"),e[1].textContent=2,e[0].textContent=1,a=h(e),a===2&&(e[2].classList.remove("shl-active"),e[1].classList.add("shl-active"))))}function c(l,b,g){const B=g.length;let p=0;const y=B-(l-1)*b;y>=b?p=b-1:p=y-1,t.placeForBookList.innerHTML="";let P=l*b-b;for(let C=0;C<=p;C+=1)k.push(G(g[P])),P+=1;const w=k.join("");t.placeForBookList.insertAdjacentHTML("beforeend",w),J()}function et(l,b){k.push(G(b[l]));const g=k.join("");t.placeForBookList.insertAdjacentHTML("beforeend",g),J()}function it(l,b){const g=b.findIndex(B=>B._id===l);return g!==-1?(b.splice(g,1),r=b,console.log("ok"),!0):(console.log("fault"),!1)}function nt(l){localStorage.setItem(H,JSON.stringify(l))}function G(l){const{_id:b,book_image:g,description:B,author:p,list_name:y,title:P,amazon_product_url:w,buy_links:C}=l,K=C[1]?C[1].url:"";return`<li class="shl-book-card" data-id="${b}">
           <img class="shl-book-image" src="${g}"  alt="Book cover picture for ${P}"> 
           <div class="shl-book-data">
            <ul class="shl-book-features">
              <li class="shl-book-card-features">
                <div class="shl-bookname-category">
                  <h4 class="shl-book-title">${P}</h4>
                  <p class="shl-book-category">${y}</p>
              </div>
              <button class="shl-card-delete-button" type="button">
                <svg class="shl-delete-icon" >
                        <use href="${Q}#icon-trash-03"></use>
                      </svg>
                    </button>
              </li>
              <li class="shl-book-card-features"><p class="shl-book-description">${B}</p>
              </li>
              <li class="shl-book-card-features">
                <p class="shl-book-author">${p}</p>
                <div class="shl-buy-links">
                  <a class="shl-amazon-link" href="${w}"></a>
                  <a class="shl-apple-link" href="${K}"></a>
                </div>
              </li>
             </ul>
           </div>
          </li>`}
//# sourceMappingURL=commonHelpers4.js.map
